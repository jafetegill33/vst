<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viking Settlement Tycoon</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="gameContainer">
        <!-- Top UI Bar -->
        <div id="topUI">
            <div class="ui-section">
                <h1 class="game-title">Viking Settlement Tycoon</h1>
                <span class="jarl-info" id="kingNameDisplay" style="margin-left:12px;"></span>
            </div>
            <div class="ui-section">
                <div class="resources">
                    <div class="resource-item">
                        <img class="resource-icon" src="food_icon.png" alt="Food">
                        <div class="resource-info">
                            <span class="resource-value" id="food">100</span>
                            <span class="resource-rate">(0/ps)</span>
                        </div>
                    </div>
                    <div class="resource-item">
                        <img class="resource-icon" src="wood_icon.png" alt="Wood">
                        <div class="resource-info">
                            <span class="resource-value" id="wood">50</span>
                            <span class="resource-rate">(0/ps)</span>
                        </div>
                    </div>
                    <div class="resource-item">
                        <img class="resource-icon" src="iron_icon.png" alt="Iron">
                        <div class="resource-info">
                            <span class="resource-value" id="iron">25</span>
                            <span class="resource-rate">(0/ps)</span>
                        </div>
                    </div>
                    <div class="resource-item">
                        <img class="resource-icon" src="gold_icon.png" alt="Gold">
                        <div class="resource-info">
                            <span class="resource-value" id="gold">10</span>
                            <span class="resource-rate">(0/ps)</span>
                        </div>
                    </div>
                    <div class="resource-item">
                        <img class="resource-icon" src="population_icon.png" alt="Population">
                        <div class="resource-info">
                            <span class="resource-value" id="population">5</span>
                            <span class="resource-rate">(+0/ps)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Game Area -->
        <div id="gameWorld">
            <canvas id="gameCanvas"></canvas>
            
            <!-- Building Selection Panel -->
            <div id="buildingPanel" class="panel">
                <h3>Construct Buildings</h3>
                <div class="building-grid">
                    <div class="building-card" data-building="longhouse">
                        <img class="building-icon" src="longhouse_icon.png" alt="Longhouse">
                        <div class="building-name">Longhouse</div>
                        <div class="building-cost"><img src="wood_icon.png" class="cost-icon">20 <img src="food_icon.png" class="cost-icon">10</div>
                    </div>
                    <div class="building-card" data-building="farm">
                        <img class="building-icon" src="farm_icon.png" alt="Farm">
                        <div class="building-name">Farm</div>
                        <div class="building-cost"><img src="wood_icon.png" class="cost-icon">15</div>
                    </div>
                    <div class="building-card" data-building="lumbermill">
                        <img class="building-icon" src="lumbermill_icon.png" alt="Lumber Mill">
                        <div class="building-name">Lumber Mill</div>
                        <div class="building-cost"><img src="wood_icon.png" class="cost-icon">25 <img src="iron_icon.png" class="cost-icon">5</div>
                    </div>
                    <div class="building-card" data-building="blacksmith">
                        <img class="building-icon" src="blacksmith_icon.png" alt="Blacksmith">
                        <div class="building-name">Blacksmith</div>
                        <div class="building-cost"><img src="wood_icon.png" class="cost-icon">30 <img src="iron_icon.png" class="cost-icon">10</div>
                    </div>
                    <div class="building-card" data-building="tradingpost">
                        <img class="building-icon" src="tradingpost_icon.png" alt="Trading Post">
                        <div class="building-name">Trading Post</div>
                        <div class="building-cost"><img src="wood_icon.png" class="cost-icon">40 <img src="gold_icon.png" class="cost-icon">5</div>
                    </div>
                    <div class="building-card" data-building="temple">
                        <img class="building-icon" src="temple_icon.png" alt="Temple">
                        <div class="building-name">Temple</div>
                        <div class="building-cost"><img src="wood_icon.png" class="cost-icon">50 <img src="iron_icon.png" class="cost-icon">20 <img src="gold_icon.png" class="cost-icon">15</div>
                    </div>
                </div>
            </div>

            <!-- Settlement Info Panel -->
            <div id="infoPanel" class="panel">
                <h3>Settlement Status</h3>
                <div class="stat-grid">
                    <div class="stat-item">
                        <span class="stat-label">Happiness:</span>
                        <div class="stat-bar">
                            <div class="stat-fill" id="happinessBar" style="width: 75%"></div>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Defense:</span>
                        <div class="stat-bar">
                            <div class="stat-fill" id="defenseBar" style="width: 40%"></div>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Prosperity:</span>
                        <div class="stat-bar">
                            <div class="stat-fill" id="prosperityBar" style="width: 60%"></div>
                        </div>
                    </div>
                </div>
                <div class="settlement-actions">
                    <button id="generateMapBtn" class="action-btn"><img src="map_icon.png" class="btn-icon"> New Territory</button>
                    <button id="saveGameBtn" class="action-btn"><img src="save_icon.png" class="btn-icon"> Save</button>
                </div>
            </div>
        </div>

        <!-- Notification System -->
        <div id="notifications"></div>
    </div>

    <script type="importmap">
    {
        "imports": {
            "nipplejs": "https://esm.sh/nipplejs"
        }
    }
    </script>
    <script src="save-guard.js"></script>
    <script src="game.js"></script>
    <script src="pc-game.js"></script>
</body>
</html>